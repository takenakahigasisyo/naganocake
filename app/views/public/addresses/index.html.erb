

<div class="container py-5">

  <h2 class="pb-5">配送先登録/一覧</h2>
  
  <% if @address.errors.any? %>
    <strong><%= @address.errors.count %>件のエラーが出たので登録できませんでした。</strong>
    <ul>
      <% @address.errors.full_messages.each do |message| %>
        <li><%= message %></li><br>
      <% end%>
    </ul>
  <% end %>
  
  <%= form_with model: @address, url: '/addresses', method: :post do |f| %>
  <div class="form-group row">
    <label class="col-sm-3 col-form-label">郵便番号(ハイフンなし)</label>
    <%= f.text_field :postcode, class: "form-control col-sm-3" %>
  </div>
  <div class="form-group row">
    <label class="col-sm-3 col-form-label">住所</label>
    <%= f.text_field :address, class: "form-control col-sm-6" %>
  </div>
  <div class="form-group row">
    <label class="col-sm-3 col-form-label">宛名</label>
    <%= f.text_field :name, class: "form-control col-sm-3" %>
    <%= f.submit '新規登録', class: "btn btn-success offset-3 col-sm-2" %>
  </div>
  <% end %>
  
  <br>
  <table class="table table-bordered">
    <thead class="thead-light">
      <tr>
        <th>郵便番号</th>
        <th>住所</th>
        <th>宛名</th>
        <th colspan="1"></th>
      </tr>
    </thead>
    <% @addresses.each do |address| %>
    <tr>
      <td><%= address.postcode %></td>
      <td><%= address.address %></td>
      <td><%= address.name %></td>
      <td>
        <%= link_to '編集する', edit_address_path(address.id), class: "btn btn-sm btn-success" %>
        <%= link_to '削除する', address_path(address.id), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-danger"%>
      </td>
    </tr>
    <% end %>
  </table>

</div>